<!doctype html><html dir=ltr lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=5"><title>Multi-Tenancy | Aurora
</title><link rel=icon href=/favicon.ico type=image/x-icon><link rel=preload href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css as=style crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css crossorigin=anonymous><link rel=stylesheet href=https://design-system.alpha.canada.ca/gcds-utility.min.css><link rel=stylesheet href=https://cdn.design-system.alpha.canada.ca/@cdssnc/gcds-components@0.26.3/dist/gcds/gcds.css><script async type=module src=https://cdn.design-system.alpha.canada.ca/@cdssnc/gcds-components@0.26.3/dist/gcds/gcds.esm.js></script><script async nomodule src=https://cdn.design-system.alpha.canada.ca/@cdssnc/gcds-components@0.26.3/dist/gcds/gcds.js></script><link rel=stylesheet href=/scss/main.css><style>html{font-size:16px}body{font-size:var(--gcds-font-sizes-text);line-height:var(--gcds-line-heights-text);color:var(--gcds-color-grayscale-1000);font-family:var(--gcds-font-families-body),sans-serif;margin:0;animation:fade .05s forwards ease-in-out}</style></head><body style=margin:0><main><gcds-container centered size=md><gcds-text size=caption><strong>Alpha</strong>&nbsp;&nbsp;This is an experimental service.</gcds-text>
</gcds-container><gcds-header lang=en lang-href signature-variant=colour skip-to-href=#><gcds-search lang=en slot=search action=/sr/srb.html placeholder=Aurora></gcds-search><gcds-top-nav slot=menu label="Top navigation" alignment=right><gcds-nav-link href=/ slot=home>GC Cloud One: Aurora
</gcds-nav-link><gcds-nav-group open-trigger=Platform menu-label=Platform><gcds-nav-link href=/proposal>Proposal
</gcds-nav-link><gcds-nav-link href=/components>Components
</gcds-nav-link></gcds-nav-group><gcds-nav-link href=/contact slot>Contact us
</gcds-nav-link><gcds-nav-link href=/get-involved slot>Get involved
</gcds-nav-link></gcds-top-nav><gcds-breadcrumbs slot=breadcrumb><gcds-breadcrumbs-item href=https://gccloudone.ca>GC Cloud One</gcds-breadcrumbs-item>
<gcds-breadcrumbs-item href=/>Aurora</gcds-breadcrumbs-item>
<gcds-breadcrumbs-item href=/architecture/>Architecture</gcds-breadcrumbs-item>
<gcds-breadcrumbs-item href=/architecture/introduction/>Introduction</gcds-breadcrumbs-item>
<gcds-breadcrumbs-item href=/architecture/introduction/multi-tenancy/>Multi-Tenancy</gcds-breadcrumbs-item>
</gcds-breadcrumbs></gcds-header><gcds-container size=xl main-container centered tag=main><gcds-grid tag=section columns=1fr columns-desktop="
        1fr 3fr
      " align-items=start class=hydrated><aside role=complementary><gcds-side-nav label=Navigation><gcds-nav-link href=/architecture/>Architecture
</gcds-nav-link><gcds-nav-group open-trigger=Introduction menu-label=Introduction open><gcds-nav-link href=/architecture/introduction/>Introduction
</gcds-nav-link><gcds-nav-link href=/architecture/introduction/multi-tenancy/ current=true>Multi-Tenancy
</gcds-nav-link></gcds-nav-group><gcds-nav-group open-trigger=Organization menu-label=Organization><gcds-nav-link href=/architecture/organization/>Organization
</gcds-nav-link><gcds-nav-group open-trigger="Naming Convention" menu-label="Naming Convention"><gcds-nav-link href=/architecture/organization/naming-convention/>Naming
</gcds-nav-link><gcds-nav-link href=/architecture/organization/naming-convention/common/>Common
</gcds-nav-link><gcds-nav-link href=/architecture/organization/naming-convention/alternative/>Alternative
</gcds-nav-link><gcds-nav-link href=/architecture/organization/naming-convention/summary/>Summary</gcds-nav-link></gcds-nav-group></gcds-nav-group></gcds-side-nav></aside><section class=mb-400><gcds-heading tag=h1>Multi-Tenancy</gcds-heading>
<gcds-fieldset fieldset-id=field-toc legend class=mb-400><nav id=TableOfContents><ol><li><a href=#enterprise-pattern>Enterprise Pattern</a></li><li><a href=#isolation>Isolation</a></li></ol></nav></gcds-fieldset><gcds-text character-limit=false>A multi-tenant Kubernetes cluster allows multiple applications or workloads, typically managed by different teams, to coexist within the same cluster. This approach can significantly reduce infrastructure costs and simplify cluster administration by centralizing resource management. However, multi-tenancy introduces complex challenges, particularly around security and resource fairness.</gcds-text>
<gcds-text character-limit=false>From a security perspective, strong tenant isolation is critical. Each tenant must be logically and functionally isolated to prevent unauthorized access or interference from other tenants. Techniques such as network policies, role-based access control (RBAC), and namespaces are often used to enforce this isolation. However, stronger isolation mechanisms, such as strict pod security policies and dedicated node pools, can increase operational complexity and overhead.</gcds-text>
<gcds-text character-limit=false>Fairness in resource allocation is another key concern. To ensure equitable resource distribution, tenants must be allocated appropriate resource quotas, preventing any single tenant from monopolizing cluster resources and starving others. Additionally, cost attribution mechanisms must be in place so that each tenant is billed based on their actual resource consumption, ensuring fair usage across the cluster.</gcds-text>
<gcds-text character-limit=false>There are three common multi-tenancy patterns in Kubernetes:</gcds-text><div class=mb-400><gcds-grid tag=ul columns=1fr columns-tablet="1fr 1fr" columns-desktop="1fr 1fr" gap=400 class=hydrated><gcds-card card-title=Enterprise href=# badge=Enterprise description="Cluster admins have full control over the Kubernetes cluster, with permissions to create, read, update, and delete any object across all namespaces. Their responsibilities include enforcing security policies, setting resource quotas, managing cluster-wide configurations, and provisioning namespaces for tenants. When provisioning a namespace, a cluster admin can delegate administrative rights to namespace admins. In the Aurora Platform, the Aurora Solutions team fulfills the role of cluster admins."></gcds-card><gcds-card card-title="Kubernetes as a Service (KaaS) / Platform as a Service (PaaS)" href=# badge=PaaS description="In this model of cluster multi-tenancy, each tenant (typically a workload or application) is isolated within its own namespace, which is managed by a distinct team of users. In this model, users within the cluster are considered semi-trusted, as they all belong to the enterprise's organization, but tenant isolation and access controls are still necessary to ensure security and operational integrity."></gcds-card><gcds-card card-title="Software as a Service (SaaS)" href=# badge=SaaS description="In this model, the end-user interacts solely with an application, abstracting away the complexities of the underlying Kubernetes infrastructure. The cluster and Kubernetes API server are entirely hidden, with only cluster administrators having access to the API server. This pattern is ideal for users who want to deploy and manage applications without needing extensive knowledge of Kubernetes, thereby lowering the barrier to entry and simplifying the user experience. SaaS platforms provide a highly streamlined environment where users focus solely on the application layer while the platform administrators handle all operational aspects of the underlying infrastructure."></gcds-card></gcds-grid></div><gcds-text character-limit=false>At the moment Aurora adheres to the Enterprise multi-tenancy pattern, where users (solution builders) must engage with the Aurora Solutions team, acting as cluster administrators, to onboard onto the platform. To initiate this process, users are required to submit a completed onboarding form, which then provisions a dedicated namespace for the solution. Resource consumption within each namespace is tracked and charged back to the namespace owner (solution owner). This cost attribution is facilitated by the Workload Identifier (WID) label, which is assigned to each namespace. The WID allows the finance team to accurately allocate and charge costs incurred by the workloads within that namespace to the appropriate team, ensuring transparent and efficient cost management across the platform.</gcds-text>
<gcds-heading tag=h2 id=enterprise-pattern character-limit=false>Enterprise Pattern</gcds-heading>
<gcds-text character-limit=false>The main roles involved in the enterprise multi-tenancy pattern are as follows:</gcds-text><div><gcds-grid tag=ul columns=1fr columns-tablet="1fr 1fr" columns-desktop="1fr 1fr" gap=400 class=hydrated><gcds-card card-title="Cluster Admin" href=# badge=Cluster description="Cluster admins have full control over the Kubernetes cluster, with permissions to create, read, update, and delete any object across all namespaces. Their responsibilities include enforcing security policies, setting resource quotas, managing cluster-wide configurations, and provisioning namespaces for tenants. When provisioning a namespace, a cluster admin can delegate administrative rights to namespace admins. In the Aurora Platform, the Aurora Solutions team fulfills the role of cluster admins."></gcds-card><gcds-card card-title="Namespace Admin" href=# badge=Namespace description="Namespace admins are responsible for managing access control within their assigned namespaces. Access is typically governed by Identity groups or equivalent in other CSP's, and namespace admins are designated as owners of these groups. They manage the user roles and permissions for their namespace, ensuring that only authorized users can interact with the resources."></gcds-card><gcds-card card-title=Users href=# badge=User description="Users have permissions to create, read, update, and delete most Kubernetes objects within their assigned namespace. However, certain resource types, such as policies and quotas, remain restricted and can only be managed by higher-level administrators, such as cluster admins or namespace admins."></gcds-card></gcds-grid></div><gcds-heading tag=h2 id=isolation character-limit=false>Isolation</gcds-heading>
<gcds-text character-limit=false>Tenant isolation is crucial for both the security of the data within a Kubernetes cluster and the overall availability of the cluster. By enhancing isolation, the attack surface available to malicious actors is significantly reduced. Additionally, isolation helps mitigate the risk of non-malicious users accidentally exfiltrating sensitive data or impacting other tenants&rsquo; workloads. Effective tenant isolation incorporates two key properties:</gcds-text><ul><li><strong>Multi-dimensional</strong>: Security must be approached holistically, as attackers typically exploit the weakest link. Isolation should therefore be enforced across multiple dimensions—such as resource, data, and process isolation—rather than focusing solely on a single aspect, like data isolation.</li><li><strong>Directional</strong>: Isolation isn’t always bidirectional. For instance, while a node can access data from any container running on it, a container cannot access node-level data, maintaining a one-way isolation in this scenario.</li></ul><gcds-text character-limit=false>In a Kubernetes cluster, there are six layers of isolation (illustrated in the image below). Implementing isolation across multiple layers provides defense in depth. The decision on where to isolate workloads involves balancing the trade-offs between security, cost, and complexity. For the highest level of security when running hostile multi-tenant workloads, isolation at the cluster level is ideal. However, lower levels of isolation can still block many exploits using security features such as Microsoft Defender for Containers, AppArmor, SecComp, Pod Security Admission, and Kubernetes RBAC for nodes.</gcds-text>
<gcds-text character-limit=false>On Aurora the workloads are isolated at the namespace level and responsibility for the security of the namespace lies with the end-user, ensuring they apply appropriate configurations and controls.</gcds-text>
<gcds-text character-limit=false><img alt="Kubernetes Isolation Layers" src=/images/architecture/kubernetes/kubernetes_isolation_layers.png></gcds-text>
<gcds-text character-limit=false>Isolation can be applied at both the control plane and data plane levels within a Kubernetes cluster. Control plane isolation ensures that tenants cannot access or interfere with one another&rsquo;s Kubernetes API resources, while data plane isolation guarantees that workloads (e.g., pods) are segregated from each other. Achieving proper isolation in both planes involves addressing several key components. During the design phase, it is critical to consider the following security principles:</gcds-text><ul><li>Least Privilege</li><li>Segregation of Duties</li><li>Defense in Depth</li><li>Reduce the Attack Surface</li><li>Limit the Blast Radius</li></ul><gcds-date-modified lang=en>2024-10-25</gcds-date-modified></section></gcds-grid></gcds-container></main><gcds-footer lang=en display=compact contextual-heading="GC Cloud One: Aurora" contextual-links='{"About us":"/about","Contact us":"/contact","Report an issue":"https://github.com/gccloudone/aurora/issues/new/choose"}'></gcds-footer></body></html>