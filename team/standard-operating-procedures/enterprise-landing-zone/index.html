<!doctype html><html dir=ltr lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=5"><title>Onboarding process for the Enterprise Landing Zone | Aurora
</title><link rel=icon href=/favicon.ico type=image/x-icon><link rel=preload href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css as=style crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.design-system.alpha.canada.ca/@cdssnc/gcds-utility@1.10.0/dist/gcds-utility.min.css><link rel=stylesheet href=https://cdn.design-system.alpha.canada.ca/@cdssnc/gcds-components@0.42.0/dist/gcds/gcds.css><script async type=module src=https://cdn.design-system.alpha.canada.ca/@cdssnc/gcds-components@0.42.0/dist/gcds/gcds.esm.js></script><link rel=stylesheet href=/scss/main.css><link rel=stylesheet href=/scss/custom.css><style>html{font-size:16px}body{font-size:var(--gcds-font-sizes-text);line-height:var(--gcds-line-heights-text);color:var(--gcds-color-grayscale-1000);font-family:var(--gcds-font-families-body),sans-serif;margin:0;animation:fade .05s forwards ease-in-out}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css></head><body style=margin:0 class=character-limit><main><gcds-container centered size=md><gcds-text size=caption style="text-align: center;"><strong>Alpha</strong>&nbsp;&nbsp;This is an experimental service.</gcds-text>
</gcds-container><gcds-header lang=en lang-href signature-variant=colour skip-to-href=#><gcds-search lang=en slot=search action=/sr/srb.html placeholder=Aurora></gcds-search><gcds-top-nav slot=menu label="Top navigation" alignment=right><gcds-nav-link href=/ slot=home>GC Cloud One: Aurora
</gcds-nav-link><gcds-nav-group open-trigger=Platform menu-label=Platform><gcds-nav-link href=/proposal>Proposal
</gcds-nav-link><gcds-nav-link href=/vision>Vision
</gcds-nav-link><gcds-nav-link href=/architecture>Architecture
</gcds-nav-link></gcds-nav-group><gcds-nav-group open-trigger=Team menu-label=Team><gcds-nav-link href=/team/sop>Standard Operating Procedures
</gcds-nav-link><gcds-nav-link href=/team/monitoring-alerts/>Monitoring
</gcds-nav-link><gcds-nav-link href=/team/appendix>Appendix
</gcds-nav-link></gcds-nav-group><gcds-nav-group open-trigger=Community menu-label=Community><gcds-nav-link href=/get-involved>Get involved
</gcds-nav-link><gcds-nav-link href=/rules-of-engagement>Rules of Engagement
</gcds-nav-link><gcds-nav-link href=/technical-advisory-group>Technical Advisory Group
</gcds-nav-link></gcds-nav-group><gcds-nav-link href=/contact slot>Contact us
</gcds-nav-link></gcds-top-nav><gcds-breadcrumbs slot=breadcrumb><gcds-breadcrumbs-item href="https://hosting-services-hebergement.canada.ca/s/gc-cloud-one?language=en_US">GC Cloud One</gcds-breadcrumbs-item>
<gcds-breadcrumbs-item href=/>Aurora</gcds-breadcrumbs-item>
<gcds-breadcrumbs-item href=/team/>Team Guide</gcds-breadcrumbs-item>
<gcds-breadcrumbs-item href=/team/standard-operating-procedures/>Standard Operating Procedures</gcds-breadcrumbs-item>
</gcds-breadcrumbs></gcds-header><gcds-container size=xl main-container centered tag=main><gcds-grid tag=section columns=1fr columns-desktop="
        1fr 3fr
      " align-items=start class=hydrated><aside role=complementary><gcds-side-nav label="Team Guide"><gcds-nav-link href=/team/>Team Guide
</gcds-nav-link><gcds-nav-group open-trigger="Standard Operating Procedures" menu-label="Standard Operating Procedures" open><gcds-nav-link href=/team/standard-operating-procedures/>Standard Operating Procedures
</gcds-nav-link><gcds-nav-link href=/team/standard-operating-procedures/backup-disaster-recovery/>Backup and Disaster Recovery
</gcds-nav-link><gcds-nav-link href=/team/standard-operating-procedures/bootstrap-cluster/>Bootstrap Cluster
</gcds-nav-link><gcds-nav-link href=/team/standard-operating-procedures/infrastructure-and-configuration-management/>Infrastructure and Configuration Management
</gcds-nav-link><gcds-nav-link href=/team/standard-operating-procedures/issue-naming/>Issue and PR Naming Conventions
</gcds-nav-link><gcds-nav-link href=/team/standard-operating-procedures/enterprise-landing-zone/ current=true>Onboarding process for the Enterprise Landing Zone
</gcds-nav-link></gcds-nav-group><gcds-nav-group open-trigger="Monitoring and Alerting" menu-label="Monitoring and Alerting"><gcds-nav-link href=/team/monitoring-alerts/>Monitoring and Alerting
</gcds-nav-link><gcds-nav-link href=/team/monitoring-alerts/prometheus/>Prometheus
</gcds-nav-link><gcds-nav-link href=/team/monitoring-alerts/prometheus-operator/>Prometheus Operator
</gcds-nav-link><gcds-nav-link href=/team/monitoring-alerts/alertmanager/>Alertmanager
</gcds-nav-link><gcds-nav-link href=/team/monitoring-alerts/blackbox-exporter/>Blackbox Exporter
</gcds-nav-link><gcds-nav-group open-trigger="Cluster Level Alerts" menu-label="Cluster Level Alerts"><gcds-nav-link href=/team/monitoring-alerts/alert-cluster-level/>Cluster Level Alerts
</gcds-nav-link><gcds-nav-link href=/team/monitoring-alerts/alert-cluster-level/cert-manager/>Cert Manager Alerts
</gcds-nav-link><gcds-nav-link href=/team/monitoring-alerts/alert-cluster-level/node/>Node Alerts
</gcds-nav-link><gcds-nav-link href=/team/monitoring-alerts/alert-cluster-level/node-pool-pod-capacity/>Node Pool Capacity Alerts
</gcds-nav-link><gcds-nav-link href=/team/monitoring-alerts/alert-cluster-level/probe-failure/>Probe Failure Alerts
</gcds-nav-link><gcds-nav-link href=/team/monitoring-alerts/alert-cluster-level/prometheus-storage-low/>Prometheus Storage Alerts
</gcds-nav-link><gcds-nav-link href=/team/monitoring-alerts/alert-cluster-level/ssl-cert-expiring-soon/>SSL Certificate Alerts
</gcds-nav-link><gcds-nav-link href=/team/monitoring-alerts/alert-cluster-level/velero/>Velero Alerts
</gcds-nav-link></gcds-nav-group><gcds-nav-group open-trigger="Namespace Level Alerts" menu-label="Namespace Level Alerts"><gcds-nav-link href=/team/monitoring-alerts/alert-namespace-level/>Namespace Level Alerts
</gcds-nav-link><gcds-nav-link href=/team/monitoring-alerts/alert-namespace-level/container/>Container Alerts
</gcds-nav-link><gcds-nav-link href=/team/monitoring-alerts/alert-namespace-level/job/>Job Alerts
</gcds-nav-link><gcds-nav-link href=/team/monitoring-alerts/alert-namespace-level/persistent-volume-claims/>Persistent Volume Claim Alerts
</gcds-nav-link><gcds-nav-link href=/team/monitoring-alerts/alert-namespace-level/pod-not-ready/>Pod Alerts
</gcds-nav-link></gcds-nav-group></gcds-nav-group><gcds-nav-group open-trigger=Appendix menu-label=Appendix><gcds-nav-link href=/team/appendix/>Appendix
</gcds-nav-link><gcds-nav-link href=/team/appendix/acronyms/>Acronyms
</gcds-nav-link><gcds-nav-link href=/team/appendix/lexicon/>Lexicon</gcds-nav-link></gcds-nav-group></gcds-side-nav></aside><section class=mb-400><gcds-heading tag=h1>Onboarding process for the Enterprise Landing Zone</gcds-heading>
<gcds-alert alert-role=danger container=full heading="Avis de traduction" hide-close-btn=true hide-role-icon=false is-fixed=false class="hydrated mb-400"><gcds-text>Veuillez noter que ce document est actuellement en cours de développement actif et pourrait être sujet à des révisions. Une fois terminé, il sera entièrement traduit en français et mis à disposition dans sa version finale.</gcds-text>
</gcds-alert><gcds-text character-limit=true>To successfully onboard onto the Azure Enterprise Landing Zone (ESLZ), a few prerequisite steps must be completed. This guide explains how to set up the repository, register required features, and configure permissions before Aurora can be deployed.</gcds-text>
<gcds-text character-limit=true>The process builds on the L0/L1 blueprints provided by the Azure Cloud Team. These blueprints establish the enterprise foundation, including networking, network security groups (NSGs), DNS zones, logging, monitoring, and policy exemptions. Outputs from L1 are then passed into L2_blueprint_aurora, which provisions a secure and conformant Azure Kubernetes Service (AKS) cluster with predefined node pools and configuration recommended for Aurora environments. Terraform also populates Azure Key Vault with generated values, which the Aurora platform automatically consumes through Argo CD.</gcds-text><blockquote><gcds-text character-limit=true>Once these prerequisites are complete, you can move on to bootstrapping the Aurora platform.</gcds-text></blockquote><gcds-heading tag=h2 id=scope--assumptions character-limit=true>Scope & Assumptions<gcds-link href=#scope--assumptions class=pilcrow>¶</gcds-link></gcds-heading>
<gcds-text character-limit=true>This guide is written with the following context in mind:</gcds-text><ul><li>You have been provided access to the Azure DevOps repository by the Azure Cloud Team</li><li>You have an assigned Azure subscription within the ESLZ hierarchy</li><li>You can escalate privileges via Azure AD Privileged Identity Management (PIM)</li><li>The service principal XXXX_XXX_XXXXX_devops_sp has been created by the Azure Cloud Team with appropriate permissions (to create groups, app registrations, etc)</li><li>All commands are run from a workstation or jumpbox with Azure CLI, Terraform, and Terragrunt installed</li></ul><gcds-text character-limit=true>This guide does not cover ongoing operations, platform deployment, or day-to-day cluster management.</gcds-text>
<gcds-heading tag=h2 id=prerequisites character-limit=true>Prerequisites<gcds-link href=#prerequisites class=pilcrow>¶</gcds-link></gcds-heading>
<gcds-text character-limit=true>The following must be in place before you begin the onboarding steps:</gcds-text><ul><li>A Linux / WSL environment with bash, on a VM with inherent connectivity to the ESLZ</li><li>Required CLI tools installed and accessible: <strong>azure-cli</strong>, <strong>kubectl</strong>, <strong>jq</strong>, <strong>git</strong>, and <strong>terragrunt</strong></li></ul><blockquote><gcds-text character-limit=true>If any of these prerequisites are missing, resolve them before requesting an ESLZ.</gcds-text></blockquote><gcds-heading tag=h2 id=1-request-an-eslz character-limit=true>1. Request an ESLZ<gcds-link href=#1-request-an-eslz class=pilcrow>¶</gcds-link></gcds-heading>
<gcds-text character-limit=true>Request an ESLZ from the Azure Cloud team using the following e-mail template:</gcds-text><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>Hello, I would like to request a new ESLZ and setup a new AKS cluster.
</span></span><span style=display:flex><span>Listed below are the details necessary for this request:
</span></span><span style=display:flex><span>Name: SSC-AuroraSDLC
</span></span><span style=display:flex><span>CBR: 21ZN
</span></span><span style=display:flex><span>IP Range:
</span></span><span style=display:flex><span>  /22 Reserved
</span></span><span style=display:flex><span>    /23 for the Virtual Network
</span></span><span style=display:flex><span>    /23 for the POD CIDR
</span></span><span style=display:flex><span>Profile: 6
</span></span><span style=display:flex><span>Env: &lt;Env&gt;
</span></span><span style=display:flex><span>Notes:
</span></span><span style=display:flex><span>  If can base the L0 / L1 on what is here: https://dev.azure.com/SSC-Aurora/ESLZ/_git/SSC-AuroraMGMT-iac
</span></span></code></pre></div><gcds-text character-limit=true>Usually we ask for a reserved CIDR size of /22 which is broken up into:</gcds-text><ul><li>/23 for the Virtual Network</li><li>/23 for the POD CIDR</li></ul><gcds-text character-limit=true>Once the CIDRs have been given it is important to then request that the associated firewall rules are setup as well.</gcds-text>
<gcds-text character-limit=true>At this point the Azure Cloud Team will get back to you with:</gcds-text><ul><li>The Azure DevOps repository that was created</li><li>Associated runners/agents which have configured for executing pipelines</li><li>The L0 / L1 pipelines which have already been run once successfully, establishing baseline networking, NSGs, DNS zones, and policies</li><li>Usually a screenshot of the Firewall Rules that were set up in the firewall</li></ul><gcds-text character-limit=true>Finally don&rsquo;t forget to add the designated user as a member of the owner group for the new subscription.</gcds-text><ul><li>XXXX-XXX-XXXXX-Owners</li></ul><blockquote><gcds-text character-limit=true>Just for some explanation of the second /23. While it&rsquo;s not connected to the Azure network today, it will be in the future, which is why it needs to be unique and reserved in IPAM. We plan to connect that into the Azure network through Router Servers (aka. BGP) to remove the requirement for NAT, so that&rsquo;s why it needs to be reserved but not attached to the Vnet.</gcds-text></blockquote><gcds-heading tag=h2 id=2-landing-zone-repository-setup character-limit=true>2. Landing Zone Repository Setup<gcds-link href=#2-landing-zone-repository-setup class=pilcrow>¶</gcds-link></gcds-heading>
<gcds-text character-limit=true>Begin with the landing zone repository structure provided by the Azure Cloud Team. This ensures your environment remains aligned with ESLZ (Enterprise-Scale Landing Zone) standards.</gcds-text>
<gcds-text character-limit=true>You will first want to ensure the following adjustments have been made inside the L1_blueprint_base:</gcds-text><ul><li>Policy Exemptions</li><li>Private DNS Zones</li><li>VNET and Subnets</li><li>NSGs</li></ul><blockquote><gcds-text character-limit=true>Note: Request the Azure Cloud Team to merge the M.R. at the L1 level and with these adjustments before going forward.</gcds-text></blockquote><gcds-text character-limit=true>Next you will want to create the folders for L2_blueprint_aurora:</gcds-text><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>landing_zones_XXXXXX-P6/dev/L2_blueprint_aurora
</span></span><span style=display:flex><span>landing_zones_XXXXXX-P6/modules/L2_blueprint_aurora
</span></span></code></pre></div><gcds-text character-limit=true>Update the configuration files for your environment:</gcds-text><ul><li><code>landing_zones_XXXXXX-P6/dev/L2_blueprint_aurora/config/aurora.tfvars</code></li><li><code>landing_zones_XXXXXX-P6/dev/L2_blueprint_aurora/envvars.sh</code></li></ul><blockquote><gcds-text character-limit=true>TODO: The Azure Cloud team will need to generate a secret for the XXXX_XXX_XXXXX_devops_sp since it doesn&rsquo;t get stored as part of initial ESLZ L0 / L1 deployment.</gcds-text></blockquote><gcds-text character-limit=true>These define project-specific variables such as subscription IDs, resource group names, and environment settings.</gcds-text>
<gcds-heading tag=h2 id=3-privileged-identity-management-pim character-limit=true>3. Privileged Identity Management (PIM)<gcds-link href=#3-privileged-identity-management-pim class=pilcrow>¶</gcds-link></gcds-heading>
<gcds-text character-limit=true>Escalate into the App Reader role at directory scope using Azure AD Privileged Identity Management (PIM).</gcds-text>
<gcds-text character-limit=true>This role is required to view applications and groups in Entra ID, which will be necessary for validation and secret binding in later steps.</gcds-text>
<gcds-heading tag=h2 id=4-azure-feature-registration character-limit=true>4. Azure Feature Registration<gcds-link href=#4-azure-feature-registration class=pilcrow>¶</gcds-link></gcds-heading>
<gcds-text character-limit=true>Enable and confirm the EncryptionAtHost feature for your subscription:</gcds-text><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>az feature register --namespace Microsoft.Compute --name EncryptionAtHost
</span></span><span style=display:flex><span>az feature show --namespace <span style=color:#e6db74>&#34;Microsoft.Compute&#34;</span> --name <span style=color:#e6db74>&#34;EncryptionAtHost&#34;</span>
</span></span></code></pre></div><gcds-text character-limit=true>Wait until the state is Registered. If needed, refresh the provider:</gcds-text><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>az provider register --namespace Microsoft.Compute
</span></span></code></pre></div><blockquote><gcds-text character-limit=true>This registration only needs to be done once per subscription. Propagation can take up to 15 minutes.</gcds-text></blockquote><gcds-heading tag=h2 id=5-deploy-infrastructure-for-aurora-platform character-limit=true>5. Deploy Infrastructure for Aurora Platform<gcds-link href=#5-deploy-infrastructure-for-aurora-platform class=pilcrow>¶</gcds-link></gcds-heading>
<gcds-text character-limit=true>Once the landing zone repository has been prepared, authenticate and run Terragrunt to both plan and deploy the infrastructure for the Aurora platform.</gcds-text><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>source .envvars
</span></span><span style=display:flex><span>az login --use-device-code
</span></span><span style=display:flex><span>terragrunt init -upgrade
</span></span><span style=display:flex><span>terragrunt plan
</span></span><span style=display:flex><span>terragrunt apply
</span></span></code></pre></div><blockquote><gcds-text character-limit=true>Note: Reminder to source the *.envvars folder and ensure using the correct service principal XXXX_XXX_XXXXX_devops_sp is being used.</gcds-text></blockquote><gcds-heading tag=h2 id=6-retrieve-aks-credentials character-limit=true>6. Retrieve AKS Credentials<gcds-link href=#6-retrieve-aks-credentials class=pilcrow>¶</gcds-link></gcds-heading>
<gcds-text character-limit=true>Retrieve the kubeconfig credentials for your newly deployed AKS cluster.</gcds-text><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>az aks get-credentials --resource-group &lt;resource-group&gt; --name &lt;cluster-name&gt;
</span></span></code></pre></div><blockquote><gcds-text character-limit=true>Note: This command merges the AKS cluster context into your local kubeconfig.</gcds-text></blockquote><gcds-heading tag=h2 id=7-service-principal-permissions-for-argo-cd character-limit=true>7. Service Principal Permissions for Argo CD<gcds-link href=#7-service-principal-permissions-for-argo-cd class=pilcrow>¶</gcds-link></gcds-heading>
<gcds-text character-limit=true>Ensure the newly created Service Principal (SPN) for Argo CD has the necessary permissions to function correctly.</gcds-text>
<gcds-text character-limit=true>At minimum, the Microsoft Graph API permissions should include:</gcds-text><ul><li>User.Read</li><li>User.Read.All</li></ul><gcds-text character-limit=true>You must also <strong>grant admin consent</strong> for these permissions in Entra ID so Argo CD can authenticate and retrieve the resources it manages.</gcds-text>
<gcds-heading tag=h2 id=7-assign-the-aks-cluster-user-role-to-the-devops-service-principal character-limit=true>7. Assign the AKS Cluster User Role to the DevOps Service Principal<gcds-link href=#7-assign-the-aks-cluster-user-role-to-the-devops-service-principal class=pilcrow>¶</gcds-link></gcds-heading>
<gcds-text character-limit=true>The service principal XXXX_XXX_XXXXX_devops_sp that has been created by the Azure Cloud Team must have the <strong>Azure Kubernetes Service Cluster User Role</strong> assigned at the AKS cluster scope. This role is required for the service principal to interact with the Kubernetes API (e.g., running kubectl, provisioning workloads during bootstrap, or managing RBAC bindings).</gcds-text>
<gcds-heading tag=h2 id=8-bootstrap-cluster character-limit=true>8. Bootstrap Cluster<gcds-link href=#8-bootstrap-cluster class=pilcrow>¶</gcds-link></gcds-heading>
<gcds-text character-limit=true>At this point all of the Aurora infrastructure is fully deployed onto the Enterprise-Scale Landing Zone (ESLZ).</gcds-text>
<gcds-text character-limit=true>The bootstrap cluster is only required the <strong>first time</strong> to establish a management cluster. Once in place, that management cluster will perform the ongoing work of deploying and managing Aurora.</gcds-text>
<gcds-text character-limit=true>You may now wish to consult the <gcds-link href=/team/standard-operating-procedures/bootstrap-cluster/>bootstrap cluster onboarding guide</gcds-link>.</gcds-text>
<gcds-date-modified lang=en>2025-08-19</gcds-date-modified></section></gcds-grid></gcds-container></main><gcds-footer lang=en display=compact contextual-heading=Aurora contextual-links='{ "Contact us": "/contact","Report an issue": "https://github.com/gccloudone/aurora/issues/new/choose","About us": "/about" }'></gcds-footer><script src=https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js></script><script>const style=document.createElement("style");style.innerHTML=`
    .glightbox-container.glightbox-custom-white-bg img {
      background: white !important;
    }
  `,document.head.appendChild(style);const lightbox=GLightbox({openEffect:"zoom",closeEffect:"fade",skin:"custom-white-bg"})</script></body></html>